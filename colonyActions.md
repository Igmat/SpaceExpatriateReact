# Как работают колонии

## Интерфейс колонии
В интерфейс колонии добавлены свойства activate и effects.
    activate - здесь будет функция, которая будет вызываться при активации колонии.
    effects - здесь будет массив строк,  эфекты которые будут применяться при активации колонии.
    Эффекты будут применяться в том порядке, в котором они указаны в массиве.
    Эффекты будут применяться к игроку, который активировал колонию.
    Эффекты описаны в СolonyManager.ts, объект effects.

ColonyCard {
    id: number,
    type: 'colony',
    benefit: string,
    whenIsActivated: 'before' | 'after' | 'during',
    mutateAction: CardType, //или тут будет функция будет мутировать экшены,
    players?: number,
    name: string,
    activate?: (gameState: GameState) => void,
    effects?: string[]// правильный тип добавить
}

## Как активируются колонии

### ActionManager
В ActionManager в методе perform добавлен вызов метода this.colony.beforePerform(card);
Он срабатывает после 4 раунда при выборе одной из 4 открытых карт колоды на столе игроком и после установления фазы рануда.

### ColonyManager
findAplicableColonyCards - метод, который возвращает массив колоний, которые могут быть применены в данный момент. 
Принимает в качестве аргументов: card.type и строку "before" (whenIsActivated), которая указывает, что колония должна быть активирована вначале раунда.

Метод beforePerform принимает карту, которую игрок выбрал из открытых карт колоды на столе.

В методе beforePerform происходит проверка, что колония может быть применена в данный момент - вызов метода findAplicableColonyCards.
Проходимся по масиву колоний, которые могут быть применены в данный момент и для каждой колонии вызывается метод activate колонии, если он прописан в интерфейсе колонии.
Затем для каждой колонии, которая может быть применена в данный момент, проходимся по массиву effects колонии и для каждого эффекта вызываем метод effects, который прописан в ColonyManager.ts.





